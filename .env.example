# 数据库：docker-compose.yml / 本地运行均直接读取 DATABASE_URL
# SQLite（默认；适合本地开发）：会在当前目录生成 dev.db
DATABASE_URL=sqlite:///./dev.db

# PostgreSQL 示例（启用 docker compose 的 postgres profile 时使用）：
# DATABASE_URL=postgresql+psycopg2://flow:postgres_password_change_me@postgres:5432/flow

# Docker Compose（PostgreSQL）容器配置：
# - 仅当你使用 postgres profile 时才需要
# - 生产环境务必修改 POSTGRES_PASSWORD
POSTGRES_DB=flow
POSTGRES_USER=flow
POSTGRES_PASSWORD=postgres_password_change_me
POSTGRES_PORT=5432

# Docker Compose：宿主机对外暴露端口（默认 31031）
FLOW_BACKEND_PORT=31031

# Memos 实例（App 拿到 token 后会直连此地址）
MEMOS_BASE_URL=https://memos.example.com

# Memos 管理员 Token（用于创建用户）
MEMOS_ADMIN_TOKEN=

# CORS 允许来源（逗号分隔；开发可用 *）
CORS_ALLOW_ORIGINS=*

# Admin 控制台 Basic Auth（生产务必修改）
ADMIN_BASIC_USER=admin
ADMIN_BASIC_PASSWORD=admin_password_change_me
ADMIN_SESSION_SECRET=admin_session_secret_change_me
# 管理后台会话有效期（秒）
ADMIN_SESSION_MAX_AGE_SECONDS=43200
# 管理后台会话 Cookie 名称（一般无需修改）
ADMIN_SESSION_COOKIE_NAME=flow_admin_session

# Memos API 兼容：endpoint 尝试列表（逗号分隔，按顺序尝试）
# 示例：创建用户用 /api/v1/users；创建 token 用 /api/v1/users/{user_id}/accessTokens
MEMOS_CREATE_USER_ENDPOINTS=/api/v1/users
MEMOS_CREATE_TOKEN_ENDPOINTS=/api/v1/users/{user_id}/accessTokens

# 旧数据修复：当用户名在 Memos 已存在但后端库里不存在时，是否允许后端用管理员权限重置该用户的 Memos 密码
# 用途：修复“账号已创建但 token 生成失败”导致的半成品用户。生产环境默认建议 false。
MEMOS_ALLOW_RESET_PASSWORD_FOR_EXISTING_USER=false

# 开发兜底：true 时不调用 Memos，仅生成本地假 Token（生产务必为 false）
DEV_BYPASS_MEMOS=false

# 日志等级：DEBUG/INFO/WARNING/ERROR
LOG_LEVEL=INFO

# Sync (offline/multi-device): max allowed client clock skew in seconds
SYNC_MAX_CLIENT_CLOCK_SKEW_SECONDS=300

# Sync: pull max events per page
SYNC_PULL_LIMIT=200

# Default TZID (RRULE/local datetime)
DEFAULT_TZID=Asia/Shanghai
