# Learnings

## 2026-02-02
- (init) API/doc audit notepad created.
\n- OpenAPI (OAS3): response headers belong under `responses[status].headers`, where each header value is a Header Object (not a Parameter Object). See OAS 3.0.3 Response Object / Header Object sections: https://spec.openapis.org/oas/v3.0.3.html#response-object and https://spec.openapis.org/oas/v3.0.3.html#header-object\n- FastAPI: you can document non-2xx errors (and other status codes) via the route decorator `responses={...}`; FastAPI will include them in OpenAPI. Docs: https://fastapi.tiangolo.com/advanced/additional-responses/\n- FastAPI: the `responses` dict can include any fields from the OpenAPI Response Object, including `headers` and `content` (FastAPI docs explicitly call this out and point to the spec). Docs: https://fastapi.tiangolo.com/advanced/additional-responses/\n- FastAPI: for global or cross-cutting OpenAPI tweaks (e.g., add `X-Request-Id` response header to many/all operations), overriding `app.openapi()` is an intended extension point. Docs: https://fastapi.tiangolo.com/how-to/extending-openapi\n- FastAPI: `openapi_extra` is a low-level extension point that is deeply merged into the per-operation OpenAPI schema and can be used to inject `responses.*.headers` when `responses=` is not convenient. Docs: https://fastapi.tiangolo.com/advanced/path-operation-advanced-configuration/?h=openapi_extra\n- FastAPI: to document an incoming request header (e.g., `X-Request-Id`), declare it with `Header()` so it appears as a header parameter in OpenAPI; FastAPI converts underscores to hyphens by default. Docs: https://fastapi.tiangolo.com/tutorial/header-params/\n
- NOTE: the previous appended entry accidentally contains literal \n sequences (escape/quoting issue). The bullets below are the same content, correctly newline-separated.
- OpenAPI (OAS3): response headers belong under `responses[status].headers`, where each header value is a Header Object (not a Parameter Object). See OAS 3.0.3 Response Object / Header Object sections: https://spec.openapis.org/oas/v3.0.3.html#response-object and https://spec.openapis.org/oas/v3.0.3.html#header-object
- FastAPI: you can document non-2xx errors (and other status codes) via the route decorator `responses={...}`; FastAPI will include them in OpenAPI. Docs: https://fastapi.tiangolo.com/advanced/additional-responses/
- FastAPI: the `responses` dict can include any fields from the OpenAPI Response Object, including `headers` and `content` (FastAPI docs explicitly call this out and point to the spec). Docs: https://fastapi.tiangolo.com/advanced/additional-responses/
- FastAPI: for global or cross-cutting OpenAPI tweaks (e.g., add `X-Request-Id` response header to many/all operations), overriding `app.openapi()` is an intended extension point. Docs: https://fastapi.tiangolo.com/how-to/extending-openapi
- FastAPI: `openapi_extra` is a low-level extension point that is deeply merged into the per-operation OpenAPI schema and can be used to inject `responses.*.headers` when `responses=` is not convenient. Docs: https://fastapi.tiangolo.com/advanced/path-operation-advanced-configuration/?h=openapi_extra
- FastAPI: to document an incoming request header (e.g., `X-Request-Id`), declare it with `Header()` so it appears as a header parameter in OpenAPI; FastAPI converts underscores to hyphens by default. Docs: https://fastapi.tiangolo.com/tutorial/header-params/
